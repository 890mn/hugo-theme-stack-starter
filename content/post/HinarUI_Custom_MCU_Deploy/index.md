---
title: HinarUI / 自定义MCU部署配置
description: 参考 GitHub 中现有定义整理的自定义 MCU 适配说明
date: 2025-03-15 10:00:00+0000
categories: ["Embedded Develop"]
tags: ["HinarUI", "MCU"]
---

自定义 MCU 部署的核心思路是：以仓库中已有的 MCU 定义为模板，保持配置结构一致，再按你的硬件参数补齐细节。

## 快速流程

1. 选取最接近的 MCU/板卡定义作为模板，复制并更名。
2. 更新 MCU 相关配置：时钟、外设、Flash/RAM、供电与调试接口。
3. 补齐显示驱动与接口参数（SPI/I2C、分辨率、刷新速率等）。
4. 补齐引脚映射（RST/DC/CS/BL/INT 等）并校验电平与复用。
5. 更新构建配置（编译器选项、链接脚本、源码路径）。
6. 烧录并验证：先跑最小化 UI，再打开完整功能。

## 配置要点（参考仓库现有定义的组织方式）

### 1. MCU/板级基础信息
- **型号与频率**：确保系统时钟与外设时钟分频一致。
- **存储资源**：Flash/RAM 大小决定 UI 资源加载方式。
- **供电与调试**：确认调试接口可用，避免低功耗模式关闭调试。

### 2. 显示驱动参数
- **通信方式**：SPI/I2C 速度、模式、DMA 设置与驱动保持一致。
- **分辨率与方向**：保持与 UI 资源导出参数一致，避免错位。
- **刷新节奏**：控制刷新频率，平衡性能与功耗。

### 3. 引脚映射与复用
- **关键引脚**：RST/DC/CS/BL/INT 分配清晰，避免冲突。
- **引脚电平**：注意有效电平与上拉/下拉，避免显示异常。
- **复用冲突**：串口、调试、SPI 等复用引脚需提前规划。

### 4. HAL/驱动适配
- **延时与时间基准**：保证 UI 动画节拍稳定。
- **SPI/I2C 发送函数**：统一接口与返回值，便于上层调用。
- **GPIO 控制**：确保输出电平与初始化顺序正确。

### 5. 构建与烧录
- **编译选项**：根据 MCU 架构设置优化等级与宏定义。
- **链接脚本**：确认代码段、数据段与 UI 资源段位置。
- **烧录工具**：优先验证最小功能，再完整烧录。

## 验证建议

- 先跑纯色/文字页面，确认屏幕驱动稳定。
- 再加载复杂 UI 资源，检查刷新与内存占用。
- 最后打开完整交互逻辑，观察功耗与稳定性。

如果遇到兼容性问题，可回退到 GitHub 中最接近的 MCU 定义，逐项对比差异即可定位。
